<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>SetFormat</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link href="../css/default.css" rel="stylesheet" type="text/css">
</head>
<body>

<h1>SetFormat</h1>

<p>Sets the format of integers and floating point numbers generated by math operations.</p>

<pre class="Syntax">SetFormat, NumberType, Format </pre>
<h3>Parameters</h3>
<table class="info">
  <tr>
    <td width="15%"><p>NumberType</p>    </td>
    <td width="85%"><p>Must be either IntegerFast, FloatFast, Integer, or Float (the two fast modes require v1.0.48+; see <a href="#Fast">remarks</a>).</p>    </td>
  </tr>
  <tr>
    <td>Format</td>
    <td><p>For <em>NumberType</em> Integer or IntegerFast, specify H or HEX for hexadecimal, or D for decimal. Hexadecimal numbers all start with the prefix 0x (e.g. 0xFF). <span class="ver">[AHK_L 42+]:</span> Hexadecimal integers are formatted with digits A-F in lowercase when this parameter is <code>h</code> and uppercase when it is <code>H</code>.</p>
      <p><a name="sci" id="sci"></a>For <em>NumberType</em> Float or FloatFast, specify <em>TotalWidth<strong>.</strong>DecimalPlaces</em> (e.g. 0.6). In v1.0.46.11+, the letter &quot;e&quot; may be appended to produce scientific notation; e.g. 0.6e or 0.6E (using uppercase produces an uppercase E in each number instead of lowercase). Note: In AutoHotkey 1.x, scientific notation must include a decimal point; e.g. 1.0e1 is valid but not 1e1.</p>
      <p><em>TotalWidth</em> is typically  0 to indicate that number should not have any blank or zero padding. If a higher value is used, numbers  will be padded with spaces or zeroes (see <a href="#Float">remarks</a>) to make them that wide.</p>
    <p><em><a name="DecimalPlaces"></a>DecimalPlaces</em> is the number of  decimal places to display (rounding will occur). If blank or zero, neither a  decimal portion nor a decimal point will be displayed, that is, floating point results are displayed as integers rather than a floating point number. The starting default is 6.</p>
    <p>Padding: If <em>TotalWidth</em> is high enough to cause padding, spaces will be added on the left side; that is, each number will be right-justified. To use left-justification instead, precede <em>TotalWidth</em> with a minus sign. To pad with zeroes instead of spaces, precede <em>TotalWidth</em> with a zero (e.g. 06.2).</p></td>
  </tr>
</table>

<h3 id="Fast">Fast vs. Slow Mode</h3>
In v1.0.48+, IntegerFast may be used instead of Integer, and FloatFast may be used instead of Float.
<ul>
<li><strong>Advantages</strong>: The fast mode preserves the ability of variables to cache integers and floating point numbers, which substantially accelerates numerically-intensive operations. (By contrast, the slow mode forces all numeric results to be immediately converted and stored as strings.)</li>
<li><strong><a name="FastDisadv"></a>Disadvantages</strong>: When storing a number in a variable, the fast mode delays the effects of SetFormat until the script actually needs a text/string version of that variable (e.g. to display in a <a href="MsgBox.htm">MsgBox</a>). Since a different SetFormat may be in effect at that time (e.g. more or fewer decimal places), this can lead to unexpected results. To make the current fast format take effect immediately, use an operation like <em>HexValue <strong>.</strong>= &quot;&quot;</em>, which appends an empty string to the number currently stored in <em>HexValue</em>.</li>
</ul>
<p>If the slow mode &quot;Integer&quot; or &quot;Float&quot; is used anywhere in the script, even if that SetFormat line is never executed, the caching of integers or floating point numbers (respectively) is disabled the moment the script launches.</p>
<h3 id="Float">Floating Point Format</h3>
<p>In v1.0.48+, floating point variables have about 15 digits of precision internally unless <em>SetFormat Float</em> (i.e. the slow mode) is present anywhere in the script. In that case, the stored precision of floating point numbers is determined by <em><a href="#DecimalPlaces">DecimalPlaces</a></em> (like it was in pre-1.0.48 versions). In other words, once a floating point result is stored in a variable, the extra precision is lost and cannot be reclaimed without redoing the calculation with something like <em>SetFormat, Float, 0.15</em>. To avoid this loss of precision, avoid using <em>SetFormat Float</em> anywhere in the script, or use <a href="#Fast"><em>SetFormat FloatFast</em></a> instead.</p>
<p>Regardless of whether slow or fast mode is in effect, floating point results and variables are rounded off to <em><a href="#DecimalPlaces">DecimalPlaces</a></em> whenever they are displayed or converted to a string of text (e.g. <a href="MsgBox.htm">MsgBox</a> or <a href="FileAppend.htm">FileAppend</a>). To see the full precision, use something like <em>SetFormat, FloatFast, 0.15</em></p>
<p>To convert a floating point number to an integer, use <em>Var:=<a href="../Functions.htm#Round">Round</a>(Var)</em>, Var:=<a href="../Functions.htm#Floor">Floor</a>(Var), or Var:=<a href="../Functions.htm#Ceil">Ceil</a>(Var). To convert an integer to a floating point number, add 0.0 to it (e.g. Var+=0.0) or use something like <em>MyFloat:=<a href="../Functions.htm#Round">Round</a>(MyInteger, 1)</em>.</p>
<p>The built-in variable <strong>A_FormatFloat</strong> contains the current floating point format (e.g. 0.6).</p>
<h3 id="Integer">Integer Format</h3>
<p>Integer results are normally displayed as decimal, not hexadecimal. To switch to hexadecimal, use <em>SetFormat, IntegerFast, Hex. </em>This may also be used to convert an integer from decimal to hexadecimal (or vice versa) as shown in the example at the very bottom of this page.</p>
<p>Literal integers specified in a script may be written as either hexadecimal or decimal. Hexadecimal integers all start with the prefix 0x (e.g. 0xA9). They may be used anywhere a numerical value is expected. For example, <em>Sleep 0xFF</em> is equivalent to <em>Sleep 255</em> regardless of the current integer format set by SetFormat.</p>
<p>AutoHotkey supports 64-bit signed integers, which range from -9223372036854775808 (-0x8000000000000000) to 9223372036854775807 (0x7FFFFFFFFFFFFFFF).</p>
<p>The built-in variable <strong>A_FormatInteger</strong> contains the current integer format (H or D).</p>
<h3>General Remarks</h3>
<p>If SetFormat is not used in a script, integers default to decimal format, and floating point numbers default to <em>TotalWidth.DecimalPlaces</em> = 0.6. Every newly launched <a href="../misc/Threads.htm">thread</a> (such as a <a href="../Hotkeys.htm">hotkey</a>, <a href="Menu.htm">custom menu item</a>, or <a href="SetTimer.htm">timed</a> subroutine) starts off fresh with these defaults; but the defaults may be changed by using SetFormat in the auto-execute section (top part of the script).</p>
<p>An old-style assignment like x=%y% omits any leading or trailing spaces (i.e. padding). To avoid this, use <a href="AutoTrim.htm">AutoTrim</a> or the <a href="SetExpression.htm">colon-equals operator</a> (e.g. x:=y).</p>
<p>You can determine whether a variable contains a numeric value by using &quot;<a href="IfIs.htm">if var is number/integer/float</a>&quot;</p>
<p>To pad an integer with zeros or spaces without having to use floating point math on it, follow this example:</p>
<pre>Var := &quot;          &quot; . Var     <em>; The quotes contain 10 spaces.  To pad with zeros, substitute zeros for the spaces.</em>
StringRight, Var, Var, 10  <em>; This pads the number in <i>Var</i> with enough spaces to make its total width 10 characters.</em>
Var := SubStr(&quot;          &quot; . Var, -9)  <em>; A single-line alternative to the above two lines.</em></pre>
<h3>Related</h3>
<p><a href="SetExpression.htm">Expression assignment (:=)</a>, <a href="EnvAdd.htm">EnvAdd</a>, <a href="EnvSub.htm">EnvSub</a>, <a href="EnvMult.htm">EnvMult</a>, <a href="EnvDiv.htm">EnvDiv</a>, <a href="AutoTrim.htm">AutoTrim</a>, <a href="IfIs.htm">if var is type</a></p>
<h3>Examples</h3>
<pre class="NoIndent">Var = 11.333333
SetFormat, float, 6.2
Var -= 1  <em>; Sets Var to be 10.33 with one leading space because the total width is 6.</em>
SetFormat, float, 0.2
Var += 1  <em>; Sets Var to be 11.33 with no leading spaces.</em>
SetFormat, float, 06.0
Var += 0  <em>; Sets Var to be 000011</em>

<em>; Convert a decimal integer to hexadecimal:</em>
SetFormat, IntegerFast, hex
Var += 0  <em>; Sets Var (which previously contained 11) to be 0xb</em>.
Var <strong>.</strong>= &quot;&quot;  <em>; Necessary due to the &quot;fast&quot; mode.</em>
SetFormat, IntegerFast, d</pre>

</body>
</html>
